(function(){"use strict";function a(a){h.get.modules[a.name]=[]}function b(){}function c(a,b,c){return c.indexOf(a)===b}function d(a,b){for(var e in b)a||(b instanceof Array?(console.log("dsf"),a=[]):a={}),b[e]instanceof Array?(void 0===a[e]&&(a[e]=[]),a[e]=a[e].concat(b[e]).filter(c)):a[e]="object"==typeof b[e]?d(a[e],b[e]):b[e];return a}function e(a,b,c){return""===b?a:"string"==typeof b?e(a,b.split("."),c):1===b.length&&void 0!==c?a[b[0]]=c:0===b.length?a:e(a[b[0]],b.slice(1),c)}function f(a){Object.keys(h).forEach(function(b){var c=h[b].modules;void 0!==c[a.name]&&c[a.name].length>0&&(c[a.name].forEach(function(b){b(j[a.name])}),h[b].end(a))})}function g(a,b,c){var d=h[b].modules;void 0===d[a]&&(d[a]=[]),d[a].push(c)}var h,i="undefined"!=typeof module&&module.exports?require("es6-promise").Promise:this.Promise,j={},k={setSubConf:function(a,b,c){return void 0===j[a]&&(j[a]={}),e(j[a],b,c),!0},getSubConf:function(a,b){return void 0===b&&(b=""),e(j[a],b)},mergeConf:function(a,b,c){if(void 0===j[a])throw"Application does not have any name named "+a;if("object"!=typeof c)throw"Target key not an object";var f=e(j[a],b);if("object"!=typeof f)throw"Key value key not an object";d(c,f)},setConf:function(a,b){j[a]=b,f({name:a})},getConf:function(a,b){return new i(function(c){void 0!==b&&(c=b),void 0===j[a]?g(a,"get",b):c(j[a])})},subscribe:function(a,b){void 0===j[a]?g(a,"sub",b):b(j[a])},size:function(){return Object.keys(j).length},clear:function(a){void 0===a?j={}:delete j[a]}};h={get:{end:a,modules:{}},sub:{end:b,modules:{}}},"function"==typeof define&&define.amd?define(function(){return k}):"undefined"!=typeof module&&module.exports?module.exports=k:this.confity=k}).call(this);